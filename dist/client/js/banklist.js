"use strict";const account1={owner:"Jessica Davis",movements:[200,455.23,-306.5,25e3,-642.21,-133.9,79.97,1300],interestRate:1.2,pin:2222,movementsDates:["2019-11-18T21:31:17.178Z","2019-12-23T07:42:02.383Z","2020-01-28T09:15:04.904Z","2020-04-01T10:17:24.185Z","2020-05-08T14:11:59.604Z","2020-07-26T17:01:17.194Z","2020-07-28T23:36:17.929Z","2020-08-01T10:51:36.790Z"],currency:"EUR",locale:"pt-PT"},account2={owner:"Ramy Sabry",movements:[5e3,3400,-150,-790,-3210,-1e3,8500,-30],interestRate:1.5,pin:1111,movementsDates:["2021-11-01T13:15:33.035Z","2021-11-30T09:48:16.867Z","2021-12-25T06:04:23.907Z","2022-01-25T14:18:46.235Z","2022-02-05T16:33:06.386Z","2022-09-04T14:43:26.374Z","2022-09-02T18:49:59.371Z","2022-09-06T09:01:20.894Z"],currency:"USD",locale:"en-US"},account3={owner:"Jonas Schmedtmann",movements:[1e3,3400,1500,-4e3,-2e3,3500,-30],interestRate:1.7,pin:3333,movementsDates:["2021-11-01T13:15:33.035Z","2021-11-30T09:48:16.867Z","2021-12-25T06:04:23.907Z","2022-01-25T20:20:46.235Z","2022-02-05T16:33:06.386Z","2022-04-10T14:43:26.374Z","2022-06-25T18:49:59.371Z","2022-07-26T12:01:20.894Z"],currency:"GBP",locale:"en-UK"},accounts=[account1,account2,account3],updateUI=function(){countBalance(currentAccount),dateToday(),createMovements(currentAccount),countMoney(currentAccount)},optionDate={hour:"numeric",minute:"numeric",day:"numeric",month:"long",year:"numeric",weekday:"short"},formatCurrency=function(e){var t={style:"currency",currency:currentAccount.currency};return new Intl.NumberFormat(currentAccount.locale,t).format(e)},formatDate=function(e,t){n=new Date;var n=Math.round(Math.abs(e-n)/864e5);return 0===n?"Today":1===n?"Yesterday":n<=7?n+" days ago":new Intl.DateTimeFormat(currentAccount.locale,t).format(e)},moneyIn=document.querySelector(".in"),moneyOut=document.querySelector(".out"),interest=document.querySelector(".interest"),btnSort=document.querySelector(".btn-sort"),timeOut=document.querySelector(".time-out"),countMoney=function(e){var t=e.movements.filter(e=>0<e).reduce((e,t)=>e+t,0),n=(moneyIn.textContent=formatCurrency(t),e.movements.filter(e=>e<0).reduce((e,t)=>e+t,0)),n=(moneyOut.textContent=formatCurrency(Math.abs(n)),t*(e.interestRate/100));interest.textContent=formatCurrency(n)};let sort=!1;btnSort.addEventListener("click",function(){createMovements(currentAccount,!sort),sort=!sort});let timing;const timer=function(){function e(){var e=String(Math.trunc(n/60)).padStart(2,0),t=String(n%60).padStart(2,0);timeOut.textContent=e+":"+t,0===n&&(clearInterval(o),mainSection.classList.add("hidden-op"),headName.textContent="Log in to get started"),n--}let n=600;e();const o=setInterval(e,1e3);return o},headName=document.querySelector(".start"),loginUser=document.querySelector(".login--user"),loginPin=document.querySelector(".login--pin"),btnLogin=document.querySelectorAll(".btn")[0],labelUser=document.querySelector(".wrong-u"),labelPin=document.querySelector(".wrong-p"),mainSection=document.querySelector(".main");let wrong=new Audio("sounds/wrong.wav"),done=(wrong.volume=.5,new Audio("sounds/done.wav")),correctLogin=(done.volume=.5,new Audio("sounds/correct-login.mp3")),close=(correctLogin.volume=.5,new Audio("sounds/close-account.mp3"));close.volume=.5;let currentAccount;const createUserName=function(){accounts.forEach(e=>{e.nickName=e.owner.toLowerCase().split(" ").map(e=>e[0]).join("")})},balanceDate=(createUserName(accounts),btnLogin.addEventListener("click",function(e){e.preventDefault(),(currentAccount=accounts.find(e=>e.nickName===loginUser.value))?.pin===+loginPin.value?(correctLogin.play(),mainSection.classList.remove("hidden-op"),labelPin.classList.add("hidden"),headName.textContent="Welcome back, "+currentAccount.owner.split(" ")[0],updateUI(),timing&&clearInterval(timing),timing=timer()):(wrong.play(),labelPin.classList.remove("hidden")),loginPin.value=loginUser.value="",loginPin.blur()}),document.querySelector(".date")),balanceValue=document.querySelector(".balance-value"),movsContainer=document.querySelector(".movement");let balanceTotal;const countBalance=function(e){balanceTotal=e.movements.reduce((e,t)=>e+t,0),balanceValue.textContent=formatCurrency(balanceTotal)},dateToday=function(){balanceDate.textContent=new Intl.DateTimeFormat(currentAccount.locale,optionDate).format(new Date)},createMovements=function(r,e=!1){movsContainer.innerHTML=" ";const t=e?r.movements.slice().sort((e,t)=>e-t):r.movements;t.forEach((e,t)=>{var n=0<e?"deposit":"withdrawl",o=new Date(r.movementsDates[t]),t=`
    <div class="movement-row flex">
      <p class="movement-type movement-type--${n}">${t+1} ${n}</p>
      <p class="movement-date">${formatDate(o)}</p>
      <p class="movement-value">${formatCurrency(e)}</p>
    </div>
    `;movsContainer.insertAdjacentHTML("afterbegin",t)})},transferTo=document.querySelector(".transfer-to"),transferAmount=document.querySelector(".transfer-amount"),transferBtn=document.querySelectorAll(".btn")[1],labelsTranfer=document.querySelectorAll(".label"),loanAmount=document.querySelector(".loan-amount"),loanBtn=document.querySelectorAll(".btn")[2],labelLoan=document.querySelector(".label-loan"),closeConfirmUser=document.querySelector(".close-confirm-user"),closeConfirmPin=document.querySelector(".close-confirm-pin"),closeLabelUser=document.querySelector(".label-close-1"),closeLabelPin=document.querySelector(".label-close-2"),closeBtn=document.querySelectorAll(".btn")[3];transferBtn.addEventListener("click",function(e){e.preventDefault(),transferTo.addEventListener("input",function(){labelsTranfer[0].textContent="Transfer to",labelsTranfer[0].style.color="#333"}),transferAmount.addEventListener("input",function(){labelsTranfer[1].textContent="Amount",labelsTranfer[1].style.color="#333"});const t=accounts.find(e=>e.nickName===transferTo.value);0<+transferAmount.value&&t&&+balanceTotal>+transferAmount.value&&t!==currentAccount&&""!==transferAmount.value?(done.play(),currentAccount.movements.push(-transferAmount.value),currentAccount.movementsDates.push((new Date).toISOString()),t.movements.push(+transferAmount.value),t.movementsDates.push((new Date).toISOString()),updateUI(),transferAmount.value=transferTo.value="",transferAmount.blur(),clearInterval(timing),timing=timer()):t?+balanceTotal<+transferAmount.value?(wrong.play(),labelsTranfer[1].textContent="No money enough!",labelsTranfer[1].style.color="#f00"):t===currentAccount?(wrong.play(),labelsTranfer[0].textContent="Cuurent account!",labelsTranfer[0].style.color="#f00"):+transferAmount.value<=0&&(wrong.play(),labelsTranfer[1].textContent="Amount <= 0!",labelsTranfer[1].style.color="#f00"):(wrong.play(),labelsTranfer[0].textContent="Wong user!",labelsTranfer[0].style.color="#f00")}),loanBtn.addEventListener("click",function(e){e.preventDefault(),loanAmount.addEventListener("input",function(){labelLoan.textContent="Amount",labelLoan.style.color="#333"});const t=Math.floor(loanAmount.value);0<t&&currentAccount.movements.some(e=>e>=.1*t)?(done.play(),setTimeout(()=>{currentAccount.movements.push(+t),currentAccount.movementsDates.push((new Date).toISOString()),clearInterval(timing),timing=timer(),updateUI()},3e3),loanAmount.value="",loanAmount.blur()):t<=0&&(wrong.play(),labelLoan.textContent="Wrong value!",labelLoan.style.color="#f00")}),closeBtn.addEventListener("click",function(e){e.preventDefault(),closeConfirmUser.addEventListener("input",function(){closeLabelUser.textContent="Confirm User",closeLabelUser.style.color="#333"}),closeConfirmPin.addEventListener("input",function(){closeLabelPin.textContent="Confirm PIN",closeLabelPin.style.color="#333"}),currentAccount.nickName===closeConfirmUser.value&&currentAccount.pin===+closeConfirmPin.value?(close.play(),e=accounts.findIndex(e=>e.nickName===closeConfirmUser.value),accounts.splice(e,1),mainSection.classList.add("hidden-op"),headName.textContent="Log in to get started",closeConfirmUser.value=closeConfirmPin.value="",closeConfirmPin.blur(),clearInterval(timing),timing=timer()):currentAccount.nickName!==closeConfirmUser.value?(wrong.play(),closeLabelUser.textContent="Wrong user!",closeLabelUser.style.color="#f00"):currentAccount.pin!==+closeConfirmPin.value&&(wrong.play(),closeLabelPin.textContent="Wrong PIN!",closeLabelPin.style.color="#f00")});
//# sourceMappingURL=banklist.js.map
